{"version":3,"names":["_sfc_main","data","userInfo","todayTaskList","title","time","upcomingTaskList","deadline","priority","priorityText","onLoad","loadUserInfo","methods","utils_storage","getUserInfo","conso","fetchUserInfo","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","api_index","userAPI","sent","t0","common_vendor","index","__f__","stop","logout","_callee3","_callee3$","_context3","showModal","content","confirmText","cancelText","success","_success","_callee2","_callee2$","_context2","confirm","clearUserData","reLaunch","url","_x","apply","arguments","viewAllTasks","type","showToast","concat","icon","handleTaskComplete","task","wx","createPage","MiniProgramPage"],"sources":["index.vue","cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"main-container\">\r\n    <view class=\"header\">\r\n      <text class=\"page-title\">学习助手</text>\r\n      <view class=\"user-info\" @click=\"logout\">\r\n        <view class=\"avatar\">\r\n          <text class=\"avatar-text\">{{ userInfo ? userInfo.username?.[0]?.toUpperCase() || 'U' : 'U' }}</text>\r\n        </view>\r\n        <view class=\"user-details\">\r\n          <text class=\"user-name\">{{ userInfo ? userInfo.username || '游客' : '游客' }}</text>\r\n          <text class=\"logout-text\">点击退出</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"stats-container\">\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">3</text>\r\n        <text class=\"stat-label\">待办任务</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">12</text>\r\n        <text class=\"stat-label\">累计笔记</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">7</text>\r\n        <text class=\"stat-label\">连续学习</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"today-tasks\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">今日待办</text>\r\n        <text class=\"section-more\" @click=\"viewAllTasks('today')\">查看全部</text>\r\n      </view>\r\n      <view class=\"task-list\">\r\n        <view class=\"task-item\" v-for=\"(task, index) in todayTaskList\" :key=\"index\">\r\n          <checkbox class=\"task-checkbox\"></checkbox>\r\n          <view class=\"task-content\">\r\n            <text class=\"task-title\">{{ task.title }}</text>\r\n            <text class=\"task-time\">{{ task.time }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"upcoming-tasks\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">即将截止(3天内)</text>\r\n        <text class=\"section-more\" @click=\"viewAllTasks('upcoming')\">查看全部</text>\r\n      </view>\r\n      <view class=\"task-list\">\r\n        <view class=\"task-item\" v-for=\"(task, index) in upcomingTaskList\" :key=\"index\">\r\n          <checkbox class=\"task-checkbox\"></checkbox>\r\n          <view class=\"task-content\">\r\n            <text class=\"task-title\">{{ task.title }}</text>\r\n            <view class=\"task-deadline\">\r\n              <text class=\"deadline-label\">{{ task.deadline }}</text>\r\n              <view class=\"priority-tag\" :class=\"task.priority\">{{ task.priorityText }}</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n// 导入用户API和存储工具\r\nimport { userAPI } from '../../api';\r\nimport { getUserInfo, clearUserData } from '../../utils/storage';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: null,\r\n      todayTaskList: [\r\n        {\r\n          title: '完成数学作业第5章',\r\n          time: '数学 11:00'\r\n        },\r\n        {\r\n          title: '复习英语单词本',\r\n          time: '英语 14:00'\r\n        },\r\n        {\r\n          title: '背诵',\r\n          time: '语文 16:00'\r\n        }\r\n      ],\r\n      upcomingTaskList: [\r\n        {\r\n          title: '提交课程论文',\r\n          deadline: '明天截止',\r\n          priority: 'high',\r\n          priorityText: '论文'\r\n        },\r\n        {\r\n          title: '历史',\r\n          deadline: '后天截止',\r\n          priority: 'medium',\r\n          priorityText: '作业'\r\n        },\r\n        {\r\n          title: '编程项目一阶提交',\r\n          deadline: '后天截止',\r\n          priority: 'low',\r\n          priorityText: '计划中'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  onLoad() {\r\n    // 页面加载时获取用户信息\r\n    this.loadUserInfo();\r\n  },\r\n  methods: {\r\n    // 加载用户信息\r\n    loadUserInfo() {\r\n      this.userInfo = getUserInfo();\r\n      conso\r\n      if (!this.userInfo) {\r\n        // 如果本地没有用户信息，尝试从服务器获取\r\n        this.fetchUserInfo();\r\n      }\r\n    },\r\n    \r\n    // 从服务器获取用户信息\r\n    async fetchUserInfo() {\r\n      try {\r\n        const res = await userAPI.getUserInfo();\r\n        this.userInfo = res.data;\r\n      } catch (error) {\r\n        console.error('获取用户信息失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 退出登录\r\n    async logout() {\r\n      uni.showModal({\r\n        title: '退出登录',\r\n        content: '确定要退出登录吗？',\r\n        confirmText: '确定',\r\n        cancelText: '取消',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              // 调用退出登录API\r\n              await userAPI.logout();\r\n              // 清除本地数据\r\n              clearUserData();\r\n              // 跳转到登录页面\r\n              uni.reLaunch({\r\n                    url: '/pages/login/login'\r\n              });\r\n            } catch (error) {\r\n              console.error('退出登录失败:', error);\r\n              // 即使API调用失败，也要清除本地数据并跳转到登录页\r\n              clearUserData();\r\n              uni.reLaunch({\r\n                    url: '/pages/login/login'\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    viewAllTasks(type) {\r\n      uni.showToast({\r\n        title: `查看全部${type === 'today' ? '今日' : '即将截止'}任务`,\r\n        icon: 'none'\r\n      })\r\n    },\r\n    \r\n    handleTaskComplete(task) {\r\n      // 处理任务完成逻辑\r\n      uni.showToast({\r\n        title: '任务已完成',\r\n        icon: 'success'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main-container {\r\n  min-height: 100vh;\r\n  background-color: #f8f8f8;\r\n  padding: 30rpx 20rpx 120rpx;\r\n}\r\n\r\n.header {\r\n    padding: 20rpx;\r\n    margin-bottom: 30rpx;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    \r\n    .page-title {\r\n      font-size: 36rpx;\r\n      font-weight: 600;\r\n      color: #333333;\r\n    }\r\n    \r\n    .user-info {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 10rpx;\r\n      border-radius: 12rpx;\r\n      background-color: #f5f5f5;\r\n    }\r\n    \r\n    .avatar {\r\n      width: 60rpx;\r\n      height: 60rpx;\r\n      border-radius: 50%;\r\n      background-color: #5374f7;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      margin-right: 16rpx;\r\n    }\r\n    \r\n    .avatar-text {\r\n      color: #ffffff;\r\n      font-size: 28rpx;\r\n      font-weight: 600;\r\n    }\r\n    \r\n    .user-details {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n    \r\n    .user-name {\r\n      font-size: 28rpx;\r\n      font-weight: 500;\r\n      color: #333333;\r\n    }\r\n    \r\n    .logout-text {\r\n      font-size: 22rpx;\r\n      color: #999999;\r\n      margin-top: 2rpx;\r\n    }\r\n  }\r\n\r\n.stats-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20rpx;\r\n  margin-bottom: 30rpx;\r\n  \r\n  .stat-card {\r\n    flex: 1;\r\n    background-color: #ffffff;\r\n    border-radius: 20rpx;\r\n    padding: 28rpx 0;\r\n    text-align: center;\r\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n    \r\n    .stat-number {\r\n      display: block;\r\n      font-size: 48rpx;\r\n      font-weight: 600;\r\n      color: #5374f7;\r\n      margin-bottom: 8rpx;\r\n    }\r\n    \r\n    .stat-label {\r\n      font-size: 24rpx;\r\n      color: #666666;\r\n    }\r\n  }\r\n}\r\n\r\n.today-tasks,\r\n.upcoming-tasks {\r\n  background-color: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 28rpx;\r\n  margin-bottom: 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n  \r\n  .section-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 28rpx;\r\n    \r\n    .section-title {\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      color: #333333;\r\n    }\r\n    \r\n    .section-more {\r\n      font-size: 26rpx;\r\n      color: #5374f7;\r\n    }\r\n  }\r\n  \r\n  .task-list {\r\n    \r\n    .task-item {\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding: 16rpx 0;\r\n      border-bottom: 1rpx solid #f0f0f0;\r\n      \r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n      \r\n      .task-checkbox {\r\n        transform: scale(0.8);\r\n        margin-right: 16rpx;\r\n        margin-top: 8rpx;\r\n      }\r\n      \r\n      .task-content {\r\n        flex: 1;\r\n        \r\n        .task-title {\r\n          display: block;\r\n          font-size: 30rpx;\r\n          color: #333333;\r\n          margin-bottom: 8rpx;\r\n        }\r\n        \r\n        .task-time {\r\n          font-size: 24rpx;\r\n          color: #999999;\r\n        }\r\n        \r\n        .task-deadline {\r\n          display: flex;\r\n          align-items: center;\r\n          \r\n          .deadline-label {\r\n            font-size: 24rpx;\r\n            color: #999999;\r\n            margin-right: 12rpx;\r\n          }\r\n          \r\n          .priority-tag {\r\n            padding: 4rpx 16rpx;\r\n            border-radius: 12rpx;\r\n            font-size: 20rpx;\r\n            \r\n            &.high {\r\n              background-color: #ffe6e6;\r\n              color: #ff4d4f;\r\n            }\r\n            \r\n            &.medium {\r\n              background-color: #fff7e6;\r\n              color: #faad14;\r\n            }\r\n            \r\n            &.low {\r\n              background-color: #e6f7ff;\r\n              color: #1890ff;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/programming/Uniapp/aiNote/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}