{"version":3,"names":["_sfc_main","data","today","Date","startDate","getFullYear","String","getMonth","padStart","getDate","tomorrow","setDate","defaultDeadline","task","title","description","priority","deadline","estimatedStartTime","estimatedEndTime","tags","course","popularTags","isDatePickerVisible","isTimePickerVisible","currentPicker","computed","isFormValid","trim","length","watch","taskDeadline","newVal","selectedDate","now","setHours","common_vendor","index","showToast","icon","duration","methods","goBack","navigateBack","selectTag","tag","onDeadlineChange","e","__f__","detail","value","validateForm","startTime","concat","endTime","checkLogin","userId","utils_storage","getUserId","showModal","content","showCancel","success","navigateTo","url","onStartTimeChange","onEndTimeChange","buildFullDescription","fullDescription","_a","additionalInfo","push","_b","_c","join","submitTask","_this","taskData","parseInt","taskName","showLoading","api_task","addTask","then","res","hideLoading","code","delta","eventChannel","getOpenerEventChannel","emit","_objectSpread2","id","status","msg","errorMessages","action","removeUserId","default","error","complete","setTimeout","catch","errorTitle","response","message","wx","createPage","MiniProgramPage"],"sources":["add-task.vue","cGFnZXMvdGFza3MvYWRkLXRhc2sudnVl"],"sourcesContent":["<template>\n  <view class=\"add-task-container page-container\">\n    <view class=\"header\">\n      <view class=\"back-button\" @click=\"goBack\">\n        <text class=\"back-icon\">←</text>\n      </view>\n      <text class=\"page-title\">创建新任务</text>\n    </view>\n\n    <scroll-view scroll-y=\"true\" class=\"form-scroll\">\n      <view class=\"form-container\">\n        <view class=\"form-item\">\n          <view class=\"form-label\">任务标题</view>\n          <input\n            class=\"form-input\"\n            v-model=\"task.title\"\n            placeholder=\"请简要描述您的任务\"\n            maxlength=\"100\"\n          />\n        </view>\n\n        <view class=\"form-item\">\n          <view class=\"form-label\">描述（可选）</view>\n          <textarea\n            class=\"form-textarea\"\n            v-model=\"task.description\"\n            placeholder=\"关于该任务的详细描述...\"\n            maxlength=\"500\"\n            rows=\"4\"\n          />\n        </view>\n\n        <view class=\"form-item\">\n          <view class=\"form-label\">优先级</view>\n          <view class=\"priority-options\">\n            <view\n              class=\"priority-option high\"\n              :class=\"{ active: task.priority === 'high' }\"\n              @click=\"task.priority = 'high'\"\n            >\n              <text class=\"priority-icon\">⚠️</text>\n              <text class=\"priority-text\">高优先级</text>\n            </view>\n\n            <view\n              class=\"priority-option medium\"\n              :class=\"{ active: task.priority === 'medium' }\"\n              @click=\"task.priority = 'medium'\"\n            >\n              <text class=\"priority-icon\">⚠️</text>\n              <text class=\"priority-text\">中等</text>\n            </view>\n\n            <view\n              class=\"priority-option low\"\n              :class=\"{ active: task.priority === 'low' }\"\n              @click=\"task.priority = 'low'\"\n            >\n              <text class=\"priority-icon\">▼</text>\n              <text class=\"priority-text\">低</text>\n            </view>\n          </view>\n        </view>\n        1111\n        <view class=\"form-item\">\n          <view class=\"form-label\">截止日期</view>\n          <uni-datetime-picker\n            type=\"datetime\"\n            :value=\"task.deadline\"\n            :start=\"new Date().toISOString().split('T')[0]\"\n            :end=\"new Date().getFullYear() + 3 + '-12-31'\"\n            @change=\"onDeadlineChange\"\n            placeholder=\"选择截止日期和时间\"\n            border\n          />\n        </view>\n\n        <view class=\"form-item\">\n          <view class=\"form-label\">估计时间</view>\n          <view class=\"time-picker-container\">\n            <view class=\"picker-item\">\n              <view class=\"picker-label\">开始时间</view>\n              <uni-datetime-picker\n                type=\"time\"\n                :value=\"task.estimatedStartTime\"\n                @change=\"onStartTimeChange\"\n                placeholder=\"选择开始时间\"\n                border\n              />\n            </view>\n            <view class=\"picker-item\">\n              <view class=\"picker-label\">结束时间</view>\n              <uni-datetime-picker\n                type=\"time\"\n                :value=\"task.estimatedEndTime\"\n                @change=\"onEndTimeChange\"\n                placeholder=\"选择结束时间\"\n                border\n              />\n            </view>\n          </view>\n        </view>\n        <view class=\"form-item\">\n          <view class=\"form-label\">关联标签</view>\n          <input\n            class=\"form-input\"\n            v-model=\"task.tags\"\n            placeholder=\"输入标签或选择已有标签\"\n            maxlength=\"50\"\n          />\n          <view class=\"tags-container\">\n            <view\n              v-for=\"(tag, index) in popularTags\"\n              :key=\"index\"\n              class=\"tag-item\"\n              @click=\"selectTag(tag)\"\n            >\n              <text># {{ tag }}</text>\n            </view>\n          </view>\n        </view>\n        <view class=\"form-item\">\n          <view class=\"form-label\">所属课程/项目</view>\n          <input\n            class=\"form-input\"\n            v-model=\"task.course\"\n            placeholder=\"例如：数学分析\"\n            maxlength=\"50\"\n          />\n        </view>\n      </view>\n    </scroll-view>\n\n    <view class=\"footer\">\n      <button\n        class=\"submit-button\"\n        type=\"primary\"\n        @click=\"submitTask\"\n        :disabled=\"!isFormValid\"\n      >\n        创建任务\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { addTask } from \"../../api/task\";\nimport { getUserId, removeUserId } from \"../../utils/storage\";\n\nexport default {\n  data() {\n    // 设置默认开始日期为今天\n    const today = new Date();\n    const startDate =\n      today.getFullYear() +\n      \"-\" +\n      String(today.getMonth() + 1).padStart(2, \"0\") +\n      \"-\" +\n      String(today.getDate()).padStart(2, \"0\");\n\n    // 设置默认结束日期为明天\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    const defaultDeadline =\n      tomorrow.getFullYear() +\n      \"-\" +\n      String(tomorrow.getMonth() + 1).padStart(2, \"0\") +\n      \"-\" +\n      String(tomorrow.getDate()).padStart(2, \"0\") +\n      \" 18:00\";\n\n    return {\n      task: {\n        title: \"\",\n        description: \"\",\n        priority: \"medium\", // 默认中等优先级\n        deadline: defaultDeadline,\n        estimatedStartTime: \"\",\n        estimatedEndTime: \"\",\n        tags: \"\",\n        course: \"\",\n      },\n      popularTags: [\"作业\", \"复习\", \"预习\", \"实验\", \"报告\", \"论文\", \"考试\"],\n      startDate: startDate,\n      isDatePickerVisible: false,\n      isTimePickerVisible: false,\n      currentPicker: \"\",\n      // 开发测试模式\n\n      defaultDeadline: defaultDeadline,\n    };\n  },\n  computed: {\n    isFormValid() {\n      // 基本表单验证：任务标题不能为空\n      return (\n        this.task.title.trim().length > 0 &&\n        this.task.title.trim().length <= 100\n      );\n    },\n  },\n  watch: {\n    // 监听截止日期变化，检查是否选择了过去的日期\n    \"task.deadline\"(newVal) {\n      if (newVal) {\n        const selectedDate = new Date(newVal);\n        const now = new Date();\n        now.setHours(0, 0, 0, 0);\n\n        if (selectedDate < now) {\n          uni.showToast({\n            title: \"截止日期不能早于今天\",\n            icon: \"none\",\n            duration: 2000,\n          });\n        }\n      }\n    },\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    selectTag(tag) {\n      // 如果已有标签，添加空格分隔\n      if (this.task.tags) {\n        this.task.tags += \" \";\n      }\n      this.task.tags += tag;\n    },\n    // 处理截止日期变化\n    onDeadlineChange(e) {\n      console.log(e)\n      this.task.deadline = e.detail.value;\n    },\n    // 移除不再需要的确认和取消方法，内置API直接处理\n\n    // onDateCancel 方法已移除，内置API会自动处理取消逻辑\n    // 表单验证方法\n    validateForm() {\n      // 验证任务标题\n      if (!this.task.title.trim()) {\n        uni.showToast({\n          title: \"请输入任务标题\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      if (this.task.title.trim().length > 100) {\n        uni.showToast({\n          title: \"任务标题不能超过100个字符\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      // 验证描述长度\n      if (this.task.description && this.task.description.length > 500) {\n        uni.showToast({\n          title: \"任务描述不能超过500个字符\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      // 验证时间范围\n      if (this.task.estimatedStartTime && this.task.estimatedEndTime) {\n        const startTime = new Date(\n          `2000-01-01 ${this.task.estimatedStartTime}`\n        );\n        const endTime = new Date(`2000-01-01 ${this.task.estimatedEndTime}`);\n\n        if (startTime >= endTime) {\n          uni.showToast({\n            title: \"开始时间不能晚于结束时间\",\n            icon: \"none\",\n          });\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // 检查用户是否登录\n    checkLogin() {\n      const userId = getUserId();\n      if (!userId) {\n        uni.showModal({\n          title: \"提示\",\n          content: \"请先登录\",\n          showCancel: false,\n          success: () => {\n            uni.navigateTo({\n              url: \"/pages/login/login\",\n            });\n          },\n        });\n        return false;\n      }\n      return true;\n    },\n    // 处理开始时间变化\n    onStartTimeChange(e) {\n      this.task.estimatedStartTime = e.detail.value;\n    },\n\n    // 处理结束时间变化\n    onEndTimeChange(e) {\n      this.task.estimatedEndTime = e.detail.value;\n    },\n\n    // 构建完整描述，包含原始描述和额外信息\n    buildFullDescription() {\n      let fullDescription = this.task.description?.trim() || \"\";\n\n      // 如果有额外信息，添加到描述中\n      const additionalInfo = [];\n\n      if (this.task.estimatedStartTime && this.task.estimatedEndTime) {\n        additionalInfo.push(\n          `预计时间: ${this.task.estimatedStartTime} - ${this.task.estimatedEndTime}`\n        );\n      } else if (this.task.estimatedStartTime) {\n        additionalInfo.push(`预计开始时间: ${this.task.estimatedStartTime}`);\n      } else if (this.task.estimatedEndTime) {\n        additionalInfo.push(`预计结束时间: ${this.task.estimatedEndTime}`);\n      }\n\n      if (this.task.tags?.trim()) {\n        additionalInfo.push(`标签: ${this.task.tags.trim()}`);\n      }\n\n      if (this.task.course?.trim()) {\n        additionalInfo.push(`课程/项目: ${this.task.course.trim()}`);\n      }\n\n      // 如果有额外信息，添加到描述中\n      if (additionalInfo.length > 0) {\n        if (fullDescription) {\n          fullDescription += \"\\n\\n\";\n        }\n        fullDescription += \"--- 补充信息 ---\\n\" + additionalInfo.join(\"\\n\");\n      }\n\n      return fullDescription;\n    },\n    // onStartTimeConfirm、onEndTimeConfirm 和 onTimeCancel 方法已移除，内置API直接处理\n    submitTask() {\n      // 检查登录状态\n      if (!this.checkLogin()) {\n        return;\n      }\n\n      // 执行详细表单验证\n      if (!this.validateForm()) {\n        return;\n      }\n\n      // 构建符合API要求的任务对象\n      // 只包含API接口明确支持的字段\n      console.log(task)\n      const taskData = {\n        userId: parseInt(getUserId()), // 确保userId是数字类型\n        taskName: this.task.title.trim(),\n        description: this.buildFullDescription(), // 合并原始描述和额外信息\n        deadline: this.task.deadline || null,\n        priority: this.task.priority,\n        // 注意：API接口目前不支持estimatedStartTime、estimatedEndTime、tags、course等字段\n        // 这些信息已合并到description中\n      };\n\n      // 输出日志以便调试\n      console.log(\"提交的任务数据:\", taskData);\n\n      // 调用真实的API保存任务\n      uni.showLoading({\n        title: \"创建中...\",\n      });\n\n      // 调用真实的API保存任务\n      addTask(taskData).then((res) => {\n        uni.hideLoading();\n\n        if (res.code === 200) {\n          // 成功提示\n          uni.showToast({\n            title: \"任务创建成功\",\n            icon: \"success\",\n          });\n\n          // 返回上一页并携带新任务数据\n          uni.navigateBack({\n            delta: 1,\n          });\n        }\n      });\n\n      // 非测试模式下调用真实API\n      addTask(taskData)\n        .then((res) => {\n          uni.hideLoading();\n          console.log(\"API响应:\", res);\n\n          if (res.code === 0) {\n            // 返回上一页并携带新任务数据\n            uni.navigateBack({\n              delta: 1,\n              success: () => {\n                // 通知上一页刷新任务列表\n                const eventChannel = this.getOpenerEventChannel();\n                if (eventChannel) {\n                  eventChannel.emit(\"taskCreated\", {\n                    task: {\n                      ...taskData,\n                      id: res.data?.id || Date.now(), // 使用后端返回的ID或临时ID\n                      status: \"pending\",\n                    },\n                  });\n                }\n\n                uni.showToast({\n                  title: \"任务创建成功\",\n                  icon: \"success\",\n                });\n              },\n            });\n          } else {\n            // 处理不同类型的错误码\n            console.error(\"API错误:\", res.code, res.msg);\n\n            // 构建错误提示对象，提高可维护性\n            const errorMessages = {\n              401: {\n                title: \"登录已过期，请重新登录\",\n                action: () => removeUserId(),\n              },\n              403: { title: \"无权限创建任务\" },\n              400: { title: \"请求参数错误，请检查任务信息\" },\n              500: { title: \"服务器错误，请稍后重试\" },\n              default: { title: res.msg || \"创建失败，请稍后重试\" },\n            };\n\n            // 获取对应的错误信息\n            const error = errorMessages[res.code] || errorMessages.default;\n\n            // 显示错误提示\n            uni.showToast({\n              title: error.title,\n              icon: \"none\",\n              duration: 2500,\n              complete: () => {\n                // 如果有需要执行的操作\n                if (error.action) {\n                  // 延迟执行操作，确保用户看到提示\n                  setTimeout(() => {\n                    error.action();\n                    if (res.code === 401) {\n                      uni.navigateTo({ url: \"/pages/login/login\" });\n                    }\n                  }, 1500);\n                }\n              },\n            });\n          }\n        })\n        .catch((error) => {\n          uni.hideLoading();\n          console.error(\"创建任务失败:\", error);\n\n          // 细化错误类型判断\n          let errorTitle = \"网络错误，请检查网络连接后重试\";\n\n          if (error.code === \"ERR_NETWORK\") {\n            errorTitle = \"网络连接失败，请检查网络设置\";\n          } else if (error.response) {\n            // 处理HTTP错误状态码\n            const status = error.response.status;\n            switch (status) {\n              case 400:\n                errorTitle = \"请求参数错误，请检查任务信息\";\n                break;\n              case 401:\n                errorTitle = \"登录已过期，请重新登录\";\n                removeUserId();\n                setTimeout(() => {\n                  uni.navigateTo({ url: \"/pages/login/login\" });\n                }, 1500);\n                break;\n              case 403:\n                errorTitle = \"无权限创建任务\";\n                break;\n              case 500:\n              case 502:\n              case 503:\n                errorTitle = \"服务器暂时不可用，请稍后重试\";\n                break;\n              default:\n                errorTitle = `请求失败 (${status})`;\n            }\n          } else if (error.message) {\n            // 显示具体错误信息\n            errorTitle =\n              error.message.length > 20\n                ? \"创建任务失败，请稍后重试\"\n                : error.message;\n          }\n\n          // 显示错误提示\n          uni.showToast({\n            title: errorTitle,\n            icon: \"none\",\n            duration: 2500,\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/* 确保页面容器不会溢出 */\n.page-container {\n  width: 100%;\n  overflow-x: hidden;\n}\n\n.add-task-container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 30rpx 20rpx;\n  background-color: #ffffff;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  box-sizing: border-box;\n\n  .back-button {\n    width: 60rpx;\n    height: 60rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .back-icon {\n      font-size: 36rpx;\n      color: #333333;\n    }\n  }\n\n  .page-title {\n    font-size: 36rpx;\n    font-weight: 600;\n    color: #333333;\n  }\n\n  .header-right {\n    width: 60rpx;\n\n    .test-button {\n      padding: 8rpx 16rpx;\n      background-color: #e6f7ff;\n      border-radius: 16rpx;\n      font-size: 20rpx;\n\n      .test-text {\n        color: #1890ff;\n      }\n    }\n  }\n}\n\n.form-scroll {\n  flex: 1;\n  padding-bottom: 30rpx;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.form-container {\n  padding: 20rpx;\n  width: 100%;\n  box-sizing: border-box;\n\n  .form-item {\n    background-color: #ffffff;\n    border-radius: 20rpx;\n    padding: 24rpx;\n    margin-bottom: 20rpx;\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n    width: 100%;\n    box-sizing: border-box;\n\n    .form-label {\n      font-size: 28rpx;\n      color: #333333;\n      font-weight: 500;\n      margin-bottom: 16rpx;\n    }\n\n    .form-input {\n      width: 100%;\n      font-size: 28rpx;\n      color: #333333;\n      border: none;\n      padding: 8rpx 0;\n      box-sizing: border-box;\n    }\n\n    .form-textarea {\n      width: 100%;\n      font-size: 28rpx;\n      color: #333333;\n      border: none;\n      padding: 8rpx 0;\n      min-height: 160rpx;\n      resize: none;\n      line-height: 1.5;\n      box-sizing: border-box;\n      word-break: break-word;\n    }\n\n    .date-container {\n      display: flex;\n      flex-direction: column;\n      gap: 10rpx;\n    }\n\n    .date-value {\n      font-size: 28rpx;\n      color: #333;\n      padding: 10rpx 0;\n    }\n\n    .date-placeholder {\n      font-size: 28rpx;\n      color: #999;\n      padding: 10rpx 0;\n    }\n\n    .picker-button {\n      background-color: #f0f4ff;\n      color: #5374f7;\n      border: 1rpx solid #e0e8ff;\n      border-radius: 10rpx;\n      font-size: 28rpx;\n      padding: 15rpx 0;\n      width: 100%;\n    }\n\n    .picker-button:active {\n      background-color: #e0e8ff;\n    }\n\n    .time-picker-container {\n      display: flex;\n      flex-direction: column;\n      gap: 20rpx;\n    }\n\n    .picker-item {\n      width: 100%;\n    }\n\n    .picker-label {\n      font-size: 24rpx;\n      color: #666;\n      margin-bottom: 8rpx;\n    }\n\n    .picker-content {\n      font-size: 28rpx;\n      color: #333;\n      padding: 15rpx 0;\n      border-bottom: 1rpx solid #e0e0e0;\n    }\n\n    .picker-content:active {\n      background-color: #f5f5f5;\n    }\n\n    .priority-options {\n      display: flex;\n      gap: 20rpx;\n      width: 100%;\n      box-sizing: border-box;\n\n      .priority-option {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        padding: 20rpx 0;\n        border-radius: 16rpx;\n        border: 2rpx solid #e0e0e0;\n        transition: all 0.3s;\n        box-sizing: border-box;\n\n        &.active {\n          border-color: #5374f7;\n          background-color: #f0f4ff;\n        }\n\n        &.high {\n          &.active {\n            border-color: #ff4d4f;\n            background-color: #fff1f0;\n          }\n        }\n\n        &.medium {\n          &.active {\n            border-color: #faad14;\n            background-color: #fff7e6;\n          }\n        }\n\n        &.low {\n          &.active {\n            border-color: #1890ff;\n            background-color: #e6f7ff;\n          }\n        }\n\n        .priority-icon {\n          font-size: 36rpx;\n          margin-bottom: 8rpx;\n        }\n\n        .priority-text {\n          font-size: 24rpx;\n          color: #666666;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          max-width: 100%;\n\n          .priority-option.active & {\n            color: #5374f7;\n          }\n\n          .priority-option.high.active & {\n            color: #ff4d4f;\n          }\n\n          .priority-option.medium.active & {\n            color: #faad14;\n          }\n\n          .priority-option.low.active & {\n            color: #1890ff;\n          }\n        }\n      }\n    }\n\n    .date-container {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n\n      .date-input {\n        flex: 1;\n        font-size: 28rpx;\n        color: #333333;\n        border: none;\n        padding: 8rpx 0;\n        box-sizing: border-box;\n        background-color: transparent;\n      }\n\n      .calendar-icon {\n        margin-left: 20rpx;\n        font-size: 32rpx;\n        cursor: pointer;\n      }\n    }\n\n    .time-range-container {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n\n      .time-input {\n        flex: 1;\n        font-size: 28rpx;\n        color: #333333;\n        border: none;\n        padding: 8rpx 0;\n        text-align: center;\n        box-sizing: border-box;\n        background-color: transparent;\n        cursor: pointer;\n      }\n\n      .time-separator {\n        font-size: 28rpx;\n        color: #666666;\n        margin: 0 20rpx;\n      }\n    }\n\n    .tags-container {\n      display: flex;\n      flex-wrap: wrap;\n      margin-top: 16rpx;\n      gap: 12rpx;\n      width: 100%;\n      box-sizing: border-box;\n\n      .tag-item {\n        padding: 8rpx 20rpx;\n        background-color: #f0f0f0;\n        border-radius: 20rpx;\n        font-size: 24rpx;\n        color: #666666;\n        box-sizing: border-box;\n        white-space: nowrap;\n      }\n    }\n  }\n}\n\n.footer {\n  padding: 20rpx;\n  background-color: #ffffff;\n  border-top: 2rpx solid #f0f0f0;\n  position: sticky;\n  bottom: 0;\n  width: 100%;\n  box-sizing: border-box;\n\n  .submit-button {\n    width: 100%;\n    height: 96rpx;\n    font-size: 32rpx;\n    font-weight: 600;\n    color: #ffffff;\n    background-color: #5374f7;\n    border-radius: 48rpx;\n    border: none;\n    line-height: 96rpx;\n    box-sizing: border-box;\n  }\n}\n\n// 为禁用状态添加样式\nbutton[disabled] {\n  background-color: #a0a0a0 !important;\n  color: #ffffff !important;\n}\n\n// 输入框聚焦样式\ninput:focus,\ntextarea:focus {\n  outline: none;\n}\n</style>\n","import MiniProgramPage from 'D:/programming/Uniapp/aiNote/pages/tasks/add-task.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;AAsJA,IAAKA,SAAA,GAAU;EACbC,IAAA,WAAAA,KAAA,EAAO;IAEL,IAAMC,KAAA,GAAQ,mBAAIC,IAAA;IAClB,IAAMC,SAAA,GACJF,KAAA,CAAMG,WAAA,EAAc,GACpB,MACAC,MAAA,CAAOJ,KAAA,CAAMK,QAAA,EAAS,GAAI,CAAC,EAAEC,QAAA,CAAS,GAAG,GAAG,IAC5C,MACAF,MAAA,CAAOJ,KAAA,CAAMO,OAAA,EAAS,EAAED,QAAA,CAAS,GAAG,GAAG;IAGzC,IAAME,QAAA,GAAW,IAAIP,IAAA,CAAKD,KAAK;IAC/BQ,QAAA,CAASC,OAAA,CAAQD,QAAA,CAASD,OAAA,EAAU,GAAE,CAAC;IACvC,IAAMG,eAAA,GACJF,QAAA,CAASL,WAAA,EAAc,GACvB,MACAC,MAAA,CAAOI,QAAA,CAASH,QAAA,KAAa,CAAC,EAAEC,QAAA,CAAS,GAAG,GAAG,IAC/C,MACAF,MAAA,CAAOI,QAAA,CAASD,OAAA,EAAS,EAAED,QAAA,CAAS,GAAG,GAAG,IAC1C;IAEF,OAAO;MACLK,IAAA,EAAM;QACJC,KAAA,EAAO;QACPC,WAAA,EAAa;QACbC,QAAA,EAAU;QAAA;QACVC,QAAA,EAAUL,eAAA;QACVM,kBAAA,EAAoB;QACpBC,gBAAA,EAAkB;QAClBC,IAAA,EAAM;QACNC,MAAA,EAAQ;MACT;MACDC,WAAA,EAAa,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;MACtDlB,SAAA,EAAAA,SAAA;MACAmB,mBAAA,EAAqB;MACrBC,mBAAA,EAAqB;MACrBC,aAAA,EAAe;MAAA;MAGfb,eAAA,EAAAA;IAAA;EAEH;EACDc,QAAA,EAAU;IACRC,WAAA,WAAAA,YAAA,EAAc;MAEZ,OACE,KAAKd,IAAA,CAAKC,KAAA,CAAMc,IAAA,EAAM,CAACC,MAAA,GAAS,KAChC,KAAKhB,IAAA,CAAKC,KAAA,CAAMc,IAAA,EAAM,CAACC,MAAA,IAAU;IAEpC;EACF;EACDC,KAAA,EAAO;IAAA;IAEL,0BAAAC,aAAgBC,MAAA,EAAQ;MACtB,IAAIA,MAAA,EAAQ;QACV,IAAMC,YAAA,GAAe,IAAI9B,IAAA,CAAK6B,MAAM;QACpC,IAAME,GAAA,GAAM,mBAAI/B,IAAA;QAChB+B,GAAA,CAAIC,QAAA,CAAS,GAAG,GAAG,GAAG,CAAC;QAEvB,IAAIF,YAAA,GAAeC,GAAA,EAAK;UACtBE,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;YACZxB,KAAA,EAAO;YACPyB,IAAA,EAAM;YACNC,QAAA,EAAU;UACZ,CAAC;QACH;MACF;IACD;EACF;EACDC,OAAA,EAAS;IACPC,MAAA,WAAAA,OAAA,EAAS;MACPN,aAAA,CAAGC,KAAA,CAACM,YAAA,EAAY;IACjB;IACDC,SAAA,WAAAA,UAAUC,GAAA,EAAK;MAEb,IAAI,KAAKhC,IAAA,CAAKO,IAAA,EAAM;QAClB,KAAKP,IAAA,CAAKO,IAAA,IAAQ;MACpB;MACA,KAAKP,IAAA,CAAKO,IAAA,IAAQyB,GAAA;IACnB;IAAA;IAEDC,gBAAA,WAAAA,iBAAiBC,CAAA,EAAG;MAClBX,aAAA,CAAAC,KAAA,CAAAW,KAAA,2CAAYD,CAAC;MACb,KAAKlC,IAAA,CAAKI,QAAA,GAAW8B,CAAA,CAAEE,MAAA,CAAOC,KAAA;IAC/B;IAAA;IAAA;IAAA;IAKDC,YAAA,WAAAA,aAAA,EAAe;MAEb,IAAI,CAAC,KAAKtC,IAAA,CAAKC,KAAA,CAAMc,IAAA,EAAI,EAAI;QAC3BQ,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;UACZxB,KAAA,EAAO;UACPyB,IAAA,EAAM;QACR,CAAC;QACD,OAAO;MACT;MAEA,IAAI,KAAK1B,IAAA,CAAKC,KAAA,CAAMc,IAAA,EAAM,CAACC,MAAA,GAAS,KAAK;QACvCO,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;UACZxB,KAAA,EAAO;UACPyB,IAAA,EAAM;QACR,CAAC;QACD,OAAO;MACT;MAGA,IAAI,KAAK1B,IAAA,CAAKE,WAAA,IAAe,KAAKF,IAAA,CAAKE,WAAA,CAAYc,MAAA,GAAS,KAAK;QAC/DO,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;UACZxB,KAAA,EAAO;UACPyB,IAAA,EAAM;QACR,CAAC;QACD,OAAO;MACT;MAGA,IAAI,KAAK1B,IAAA,CAAKK,kBAAA,IAAsB,KAAKL,IAAA,CAAKM,gBAAA,EAAkB;QAC9D,IAAMiC,SAAA,GAAY,mBAAIjD,IAAA,eAAAkD,MAAA,CACN,KAAKxC,IAAA,CAAKK,kBAAkB;QAE5C,IAAMoC,OAAA,GAAU,mBAAInD,IAAA,eAAAkD,MAAA,CAAmB,KAAKxC,IAAA,CAAKM,gBAAgB,EAAE;QAEnE,IAAIiC,SAAA,IAAaE,OAAA,EAAS;UACxBlB,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;YACZxB,KAAA,EAAO;YACPyB,IAAA,EAAM;UACR,CAAC;UACD,OAAO;QACT;MACF;MAEA,OAAO;IACR;IAAA;IAEDgB,UAAA,WAAAA,WAAA,EAAa;MACX,IAAMC,MAAA,GAASC,aAAA,CAAAC,SAAA;MACf,IAAI,CAACF,MAAA,EAAQ;QACXpB,aAAA,CAAAC,KAAA,CAAIsB,SAAA,CAAU;UACZ7C,KAAA,EAAO;UACP8C,OAAA,EAAS;UACTC,UAAA,EAAY;UACZC,OAAA,EAAS,SAAAA,QAAA,EAAM;YACb1B,aAAA,CAAAC,KAAA,CAAI0B,UAAA,CAAW;cACbC,GAAA,EAAK;YACP,CAAC;UACF;QACH,CAAC;QACD,OAAO;MACT;MACA,OAAO;IACR;IAAA;IAEDC,iBAAA,WAAAA,kBAAkBlB,CAAA,EAAG;MACnB,KAAKlC,IAAA,CAAKK,kBAAA,GAAqB6B,CAAA,CAAEE,MAAA,CAAOC,KAAA;IACzC;IAAA;IAGDgB,eAAA,WAAAA,gBAAgBnB,CAAA,EAAG;MACjB,KAAKlC,IAAA,CAAKM,gBAAA,GAAmB4B,CAAA,CAAEE,MAAA,CAAOC,KAAA;IACvC;IAAA;IAGDiB,oBAAA,WAAAA,qBAAA,EAAuB;;MACrB,IAAIC,eAAA,KAAkBC,EAAA,QAAKxD,IAAA,CAAKE,WAAA,KAAV,gBAAAsD,EAAA,CAAuBzC,IAAA,OAAU;MAGvD,IAAM0C,cAAA,GAAiB;MAEvB,IAAI,KAAKzD,IAAA,CAAKK,kBAAA,IAAsB,KAAKL,IAAA,CAAKM,gBAAA,EAAkB;QAC9DmD,cAAA,CAAeC,IAAA,8BAAAlB,MAAA,CACJ,KAAKxC,IAAA,CAAKK,kBAAkB,SAAAmC,MAAA,CAAM,KAAKxC,IAAA,CAAKM,gBAAgB;MAEzE,WAAW,KAAKN,IAAA,CAAKK,kBAAA,EAAoB;QACvCoD,cAAA,CAAeC,IAAA,0CAAAlB,MAAA,CAAgB,KAAKxC,IAAA,CAAKK,kBAAkB,EAAE;MAC/D,WAAW,KAAKL,IAAA,CAAKM,gBAAA,EAAkB;QACrCmD,cAAA,CAAeC,IAAA,0CAAAlB,MAAA,CAAgB,KAAKxC,IAAA,CAAKM,gBAAgB,EAAE;MAC7D;MAEA,KAAIqD,EAAA,QAAK3D,IAAA,CAAKO,IAAA,KAAV,gBAAAoD,EAAA,CAAgB5C,IAAA,IAAQ;QAC1B0C,cAAA,CAAeC,IAAA,kBAAAlB,MAAA,CAAY,KAAKxC,IAAA,CAAKO,IAAA,CAAKQ,IAAA,EAAM,EAAE;MACpD;MAEA,KAAI6C,EAAA,QAAK5D,IAAA,CAAKQ,MAAA,KAAV,gBAAAoD,EAAA,CAAkB7C,IAAA,IAAQ;QAC5B0C,cAAA,CAAeC,IAAA,+BAAAlB,MAAA,CAAe,KAAKxC,IAAA,CAAKQ,MAAA,CAAOO,IAAA,EAAM,EAAE;MACzD;MAGA,IAAI0C,cAAA,CAAezC,MAAA,GAAS,GAAG;QAC7B,IAAIuC,eAAA,EAAiB;UACnBA,eAAA,IAAmB;QACrB;QACAA,eAAA,IAAmB,mBAAmBE,cAAA,CAAeI,IAAA,CAAK,IAAI;MAChE;MAEA,OAAON,eAAA;IACR;IAAA;IAEDO,UAAA,WAAAA,WAAA,EAAa;MAAA,IAAAC,KAAA;MAEX,IAAI,CAAC,KAAKrB,UAAA,IAAc;QACtB;MACF;MAGA,IAAI,CAAC,KAAKJ,YAAA,IAAgB;QACxB;MACF;MAIAf,aAAA,CAAAC,KAAA,CAAAW,KAAA,2CAAYnC,IAAI;MAChB,IAAMgE,QAAA,GAAW;QACfrB,MAAA,EAAQsB,QAAA,CAASrB,aAAA,CAAAC,SAAA,EAAW;QAAA;QAC5BqB,QAAA,EAAU,KAAKlE,IAAA,CAAKC,KAAA,CAAMc,IAAA,EAAM;QAChCb,WAAA,EAAa,KAAKoD,oBAAA,EAAsB;QAAA;QACxClD,QAAA,EAAU,KAAKJ,IAAA,CAAKI,QAAA,IAAY;QAChCD,QAAA,EAAU,KAAKH,IAAA,CAAKG;QAAA;QAAA;MAAA;;MAMtBoB,aAAA,CAAYC,KAAA,CAAAW,KAAA,uDAAY6B,QAAQ;MAGhCzC,aAAA,CAAAC,KAAA,CAAI2C,WAAA,CAAY;QACdlE,KAAA,EAAO;MACT,CAAC;MAGDmE,QAAA,CAAAC,OAAA,CAAQL,QAAQ,EAAEM,IAAA,CAAK,UAACC,GAAA,EAAQ;QAC9BhD,aAAA,CAAGC,KAAA,CAACgD,WAAA,EAAW;QAEf,IAAID,GAAA,CAAIE,IAAA,KAAS,KAAK;UAEpBlD,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;YACZxB,KAAA,EAAO;YACPyB,IAAA,EAAM;UACR,CAAC;UAGDH,aAAA,CAAAC,KAAA,CAAIM,YAAA,CAAa;YACf4C,KAAA,EAAO;UACT,CAAC;QACH;MACF,CAAC;MAGDN,QAAA,CAAAC,OAAA,CAAQL,QAAQ,EACbM,IAAA,CAAK,UAACC,GAAA,EAAQ;QACbhD,aAAA,CAAGC,KAAA,CAACgD,WAAA,EAAW;QACfjD,aAAA,CAAAC,KAAA,CAAAW,KAAA,2CAAY,UAAUoC,GAAG;QAEzB,IAAIA,GAAA,CAAIE,IAAA,KAAS,GAAG;UAElBlD,aAAA,CAAAC,KAAA,CAAIM,YAAA,CAAa;YACf4C,KAAA,EAAO;YACPzB,OAAA,EAAS,SAAAA,QAAA,EAAM;;cAEb,IAAM0B,YAAA,GAAeZ,KAAA,CAAKa,qBAAA;cAC1B,IAAID,YAAA,EAAc;gBAChBA,YAAA,CAAaE,IAAA,CAAK,eAAe;kBAC/B7E,IAAA,EAAA8E,cAAA,CAAAA,cAAA,KACKd,QAAA;oBACHe,EAAA,IAAIvB,EAAA,GAAAe,GAAA,CAAInF,IAAA,KAAJ,gBAAAoE,EAAA,CAAUuB,EAAA,KAAMzF,IAAA,CAAK+B,GAAA,EAAK;oBAAA;oBAC9B2D,MAAA,EAAQ;kBAAA;gBAEZ,CAAC;cACH;cAEAzD,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;gBACZxB,KAAA,EAAO;gBACPyB,IAAA,EAAM;cACR,CAAC;YACF;UACH,CAAC;QAAA,OACI;UAELH,aAAA,CAAAC,KAAA,CAAAW,KAAA,6CAAc,UAAUoC,GAAA,CAAIE,IAAA,EAAMF,GAAA,CAAIU,GAAG;UAGzC,IAAMC,aAAA,GAAgB;YACpB,KAAK;cACHjF,KAAA,EAAO;cACPkF,MAAA,EAAQ,SAAAA,OAAA;gBAAA,OAAMvC,aAAA,CAAAwC,YAAA,EAAc;cAAA;YAC7B;YACD,KAAK;cAAEnF,KAAA,EAAO;YAAW;YACzB,KAAK;cAAEA,KAAA,EAAO;YAAkB;YAChC,KAAK;cAAEA,KAAA,EAAO;YAAe;YAC7BoF,OAAA,EAAS;cAAEpF,KAAA,EAAOsE,GAAA,CAAIU,GAAA,IAAO;YAAc;UAAA;UAI7C,IAAMK,KAAA,GAAQJ,aAAA,CAAcX,GAAA,CAAIE,IAAI,KAAKS,aAAA,CAAcG,OAAA;UAGvD9D,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;YACZxB,KAAA,EAAOqF,KAAA,CAAMrF,KAAA;YACbyB,IAAA,EAAM;YACNC,QAAA,EAAU;YACV4D,QAAA,EAAU,SAAAA,SAAA,EAAM;cAEd,IAAID,KAAA,CAAMH,MAAA,EAAQ;gBAEhBK,UAAA,CAAW,YAAM;kBACfF,KAAA,CAAMH,MAAA,EAAM;kBACZ,IAAIZ,GAAA,CAAIE,IAAA,KAAS,KAAK;oBACpBlD,aAAA,CAAAC,KAAA,CAAI0B,UAAA,CAAW;sBAAEC,GAAA,EAAK;oBAAsB;kBAC9C;gBACD,GAAE,IAAI;cACT;YACD;UACH,CAAC;QACH;MAAA,CACD,EACAsC,KAAA,CAAM,UAACH,KAAA,EAAU;QAChB/D,aAAA,CAAGC,KAAA,CAACgD,WAAA,EAAW;QACfjD,aAAA,CAAcC,KAAA,CAAAW,KAAA,wDAAWmD,KAAK;QAG9B,IAAII,UAAA,GAAa;QAEjB,IAAIJ,KAAA,CAAMb,IAAA,KAAS,eAAe;UAChCiB,UAAA,GAAa;QAAA,WACJJ,KAAA,CAAMK,QAAA,EAAU;UAEzB,IAAMX,MAAA,GAASM,KAAA,CAAMK,QAAA,CAASX,MAAA;UAC9B,QAAQA,MAAA;YACN,KAAK;cACHU,UAAA,GAAa;cACb;YACF,KAAK;cACHA,UAAA,GAAa;cACb9C,aAAA,CAAAwC,YAAA;cACAI,UAAA,CAAW,YAAM;gBACfjE,aAAA,CAAAC,KAAA,CAAI0B,UAAA,CAAW;kBAAEC,GAAA,EAAK;gBAAsB;cAC7C,GAAE,IAAI;cACP;YACF,KAAK;cACHuC,UAAA,GAAa;cACb;YACF,KAAK;YACL,KAAK;YACL,KAAK;cACHA,UAAA,GAAa;cACb;YACF;cACEA,UAAA,gCAAAlD,MAAA,CAAsBwC,MAAM;UAAA;QAChC,WACSM,KAAA,CAAMM,OAAA,EAAS;UAExBF,UAAA,GACEJ,KAAA,CAAMM,OAAA,CAAQ5E,MAAA,GAAS,KACnB,iBACAsE,KAAA,CAAMM,OAAA;QACd;QAGArE,aAAA,CAAAC,KAAA,CAAIC,SAAA,CAAU;UACZxB,KAAA,EAAOyF,UAAA;UACPhE,IAAA,EAAM;UACNC,QAAA,EAAU;QACZ,CAAC;MACH,CAAC;IACJ;EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrgBAkE,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}