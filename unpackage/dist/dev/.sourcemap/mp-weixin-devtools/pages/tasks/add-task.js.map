{"version":3,"names":["_sfc_main","data","today","Date","startDate","getFullYear","String","getMonth","padStart","getDate","tomorrow","setDate","task","taskId","title","description","priority","deadline","remindTime","tagId","subjectId","subjectName","isEditMode","tags","popularTags","isDatePickerVisible","isTimePickerVisible","currentPicker","subjectList","subjectLoading","tagList","tagLoading","currentPage","pageSize","hasMoreTags","computed","isFormValid","trim","length","watch","taskDeadline","newVal","cleanedDate","replace","selectedDate","now","setHours","common_vendor","index","showToast","icon","duration","onLoad","options","setNavigationBarTitle","fetchSubjectList","fetchTagList","loadTaskDetail","id","edit","methods","goBack","navigateBack","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","response","taskData","tagIds","wrap","_callee$","_context","prev","next","__f__","abrupt","showLoading","api_task","getTaskInfo","sent","code","taskName","split","forEach","tag","find","t","push","tagName","msg","t0","hideLoading","finish","stop","getSelectedSubjectName","_this2","subject","s","value","text","_this3","_callee2","subjectQuery","result","_callee2$","_context2","api_subject","getSubjectList","Array","isArray","records","map","_arguments","arguments","_this4","_callee3","reset","tagQuery","newTags","totalRecords","_callee3$","_context3","undefined","api_tag","getTagList","concat","_toConsumableArray2","total","loadMoreTags","_this5","_callee4","_callee4$","_context4","openTagSelector","$refs","showRight","open","closeTagSelector","close","updateTaskTags","toggleTag","findIndex","splice","removeTag","isTagSelected","some","selectTag","onDeadlineChange","e","validateForm","checkLogin","userId","utils_storage","getUserId","showModal","content","showCancel","success","navigateTo","url","submitTask","_this6","join","parseInt","_a","_b","apiCall","updateTask","addTask","then","res","setTimeout","reLaunch","catch","error","message","wx","createPage","MiniProgramPage"],"sources":["add-task.vue","cGFnZXMvdGFza3MvYWRkLXRhc2sudnVl"],"sourcesContent":["<template>\n  <view class=\"add-task-container page-container\">\n    <scroll-view scroll-y=\"true\" class=\"form-scroll\">\n      <view class=\"form-container\">\n        <view class=\"form-item\">\n          <view class=\"form-label\">任务标题</view>\n          <input\n            class=\"form-input\"\n            v-model=\"task.title\"\n            placeholder=\"请简要描述您的任务\"\n            maxlength=\"100\"\n          />\n        </view>\n\n        <view class=\"form-item\">\n          <view class=\"form-label\">描述（可选）</view>\n          <textarea\n            class=\"form-textarea\"\n            v-model=\"task.description\"\n            placeholder=\"关于该任务的详细描述...\"\n            maxlength=\"500\"\n            rows=\"4\"\n          />\n        </view>\n        <!-- 学科选择 -->\n        <view class=\"form-item\">\n          <text class=\"section-label\">所属学科</text>\n          <uni-data-select\n            v-model=\"task.subjectId\"\n            :localdata=\"subjectList\"\n            :loading=\"subjectLoading\"\n            placeholder=\"请选择学科\"\n            mode=\"none\"\n            clearable\n            @change=\"\n              (e) => {\n                // 当学科变更时，更新对应的学科名称\n                const selected = this.subjectList.find(\n                  (s) => s.value === e.detail.value\n                );\n                this.task.subjectName = selected ? selected.text : '';\n              }\n            \"\n          />\n          <text\n            v-if=\"task.subjectId && subjectList.length > 0\"\n            class=\"selected-subject-info\"\n          >\n            当前选择: {{ getSelectedSubjectName() }}\n          </text>\n        </view>\n\n        <view class=\"form-item\">\n          <view class=\"form-label\">优先级</view>\n          <view class=\"priority-options\">\n            <view\n              class=\"priority-option high\"\n              :class=\"{ active: task.priority === '高' }\"\n              @click=\"task.priority = '高'\"\n            >\n              <text class=\"priority-icon\">⚠️</text>\n              <text class=\"priority-text\">高优先级</text>\n            </view>\n\n            <view\n              class=\"priority-option medium\"\n              :class=\"{ active: task.priority === '中' }\"\n              @click=\"task.priority = '中'\"\n            >\n              <text class=\"priority-icon\">⚠️</text>\n              <text class=\"priority-text\">中等</text>\n            </view>\n\n            <view\n              class=\"priority-option low\"\n              :class=\"{ active: task.priority === '低' }\"\n              @click=\"task.priority = '低'\"\n            >\n              <text class=\"priority-icon\">▼</text>\n              <text class=\"priority-text\">低</text>\n            </view>\n          </view>\n        </view>\n        <view class=\"form-item\">\n          <view class=\"form-label\">截止日期</view>\n          <uni-datetime-picker\n            type=\"datetime\"\n            v-model=\"task.deadline\"\n            :start=\"new Date().toISOString().split('T')[0]\"\n            :end=\"new Date().getFullYear() + 3 + '-12-31'\"\n            @change=\"onDeadlineChange\"\n            placeholder=\"选择截止日期和时间\"\n            border\n          />\n        </view>\n\n        <!-- 标签选择 -->\n        <view class=\"form-item\">\n          <text class=\"section-label\">关联标签</text>\n          <view class=\"tags-container\">\n            <view\n              v-for=\"tag in tags\"\n              :key=\"tag.id\"\n              class=\"tag-item\"\n              @click=\"removeTag(tag.id)\"\n            >\n              {{ tag.tagName }}\n              <text class=\"tag-close\">×</text>\n            </view>\n            <view class=\"tag-add-btn\" @click=\"openTagSelector\">\n              + 添加标签\n            </view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <view class=\"footer\">\n      <button\n        class=\"submit-button\"\n        type=\"primary\"\n        @click=\"submitTask\"\n        :disabled=\"!isFormValid\"\n      >\n        {{ isEditMode ? \"更新任务\" : \"创建任务\" }}\n      </button>\n    </view>\n    <!-- 标签选择器弹窗 -->\n    <uni-drawer ref=\"showRight\" mode=\"right\" background-color=\"#fff\">\n      <view class=\"tag-selector-content\">\n        <view class=\"tag-selector-header\">\n          <text class=\"tag-selector-title\">选择标签</text>\n          <view class=\"tag-selector-close\" @click=\"closeTagSelector\">\n            <text class=\"close-icon\">×</text>\n          </view>\n        </view>\n        <view class=\"tag-list\" @scrolltolower=\"loadMoreTags\">\n          <uni-tag\n            v-for=\"tag in tagList\"\n            :key=\"tag.id\"\n            :text=\"tag.tagName\"\n            :type=\"isTagSelected(tag.id) ? 'primary' : 'default'\"\n            inverted\n            @click=\"toggleTag(tag)\"\n          />\n          <!-- 加载更多提示 -->\n          <view v-if=\"tagLoading\" class=\"loading-more\">\n            <text>加载中...</text>\n          </view>\n\n          <!-- 没有更多数据提示 -->\n          <view\n            v-else-if=\"!hasMoreTags && tagList.length > 0\"\n            class=\"no-more-data\"\n          >\n            <text>没有更多标签了</text>\n          </view>\n        </view>\n      </view>\n    </uni-drawer>\n  </view>\n</template>\n\n<script>\nimport { addTask, getTaskInfo, updateTask } from \"../../api/task\";\nimport { getUserId, removeUserId } from \"../../utils/storage\";\n// 导入现成的接口函数，而不是直接使用request\nimport { getSubjectList } from \"../../api/subject\";\nimport { getTagList } from \"../../api/tag\";\n\nexport default {\n  data() {\n    // 设置默认开始日期为今天\n    const today = new Date();\n    const startDate =\n      today.getFullYear() +\n      \"-\" +\n      String(today.getMonth() + 1).padStart(2, \"0\") +\n      \"-\" +\n      String(today.getDate()).padStart(2, \"0\");\n\n    // 设置默认结束日期为明天\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n\n    return {\n      task: {\n        taskId: \"\", // 任务ID，用于编辑模式\n        title: \"\",\n        description: \"\",\n        priority: \"中\", // 默认中等优先级\n        deadline: \"\",\n        remindTime: \"\", // 提醒时间，暂不使用\n        tagId: \"\", // 标签ID，逗号分隔的字符串\n        subjectId: \"\", // 学科ID\n        subjectName: \"\", // 学科名称\n      },\n      isEditMode: false, // 是否为编辑模式\n      tags: [], // 已选标签\n      popularTags: [\"作业\", \"复习\", \"预习\", \"实验\", \"报告\", \"论文\", \"考试\"],\n      startDate: startDate,\n      isDatePickerVisible: false,\n      isTimePickerVisible: false,\n      currentPicker: \"\",\n      // 学科选择相关\n      subjectList: [],\n      subjectLoading: false,\n      // 标签选择相关\n      tagList: [],\n      tagLoading: false,\n      currentPage: 1, // 分页相关参数\n      pageSize: 20, // 每页加载的标签数量\n      hasMoreTags: true,\n    };\n  },\n  computed: {\n    isFormValid() {\n      // 基本表单验证：任务标题不能为空\n      return (\n        this.task.title.trim().length > 0 &&\n        this.task.title.trim().length <= 100\n      );\n    },\n  },\n  watch: {\n    // 监听截止日期变化，检查是否选择了过去的日期\n    \"task.deadline\"(newVal) {\n      if (newVal) {\n        const cleanedDate = newVal.replace(\" \", \"T\");\n        const selectedDate = new Date(cleanedDate);\n        const now = new Date();\n        now.setHours(0, 0, 0, 0);\n\n        if (selectedDate < now) {\n          uni.showToast({\n            title: \"截止日期不能早于今天\",\n            icon: \"none\",\n            duration: 2000,\n          });\n        }\n      }\n    },\n  },\n  onLoad(options) {\n    // 根据传入参数判断是否为编辑模式\n    if (options && options.taskId) {\n      this.isEditMode = true;\n      this.task.taskId = options.taskId;\n      // 设置导航栏标题\n      uni.setNavigationBarTitle({\n        title: \"编辑任务\",\n      });\n    } else {\n      // 设置导航栏标题\n      uni.setNavigationBarTitle({\n        title: \"创建任务\",\n      });\n    }\n\n    // 初始化加载学科列表\n    this.fetchSubjectList();\n    // 预加载标签列表（传入true表示重置并重新加载）\n    this.fetchTagList(true);\n\n    // 检查是否为编辑模式并加载任务详情\n    if (this.isEditMode) {\n      // 加载任务详情\n      this.loadTaskDetail();\n    } else if (options && options.id && options.edit === \"true\") {\n      // 兼容旧的参数方式\n      this.isEditMode = true;\n      this.task.taskId = options.id;\n      uni.setNavigationBarTitle({\n        title: \"编辑任务\",\n      });\n      this.loadTaskDetail();\n    }\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n\n    // 加载任务详情\n    async loadTaskDetail() {\n      if (!this.task.taskId) {\n        console.error(\"任务ID不存在\");\n        return;\n      }\n\n      try {\n        uni.showLoading({\n          title: \"加载中...\",\n        });\n\n        const response = await getTaskInfo(this.task.taskId);\n        console.log(\"任务详情:\", response);\n\n        if (response && response.code === 200 && response.data) {\n          const taskData = response.data;\n\n          // 填充任务数据\n          this.task.title = taskData.taskName || \"\";\n          this.task.description = taskData.description || \"\";\n          this.task.priority = taskData.priority || \"中\";\n\n          // 格式化截止日期，确保生成iOS兼容的格式\n          if (taskData.deadline) {\n            // 处理日期格式，确保兼容iOS设备\n            // 先移除时区信息\n            this.task.deadline = taskData.deadline.replace(\"T\", \" \");\n            console.log(\"格式化后的截止日期:\", this.task.deadline);\n          } else {\n            this.task.deadline = \"\";\n          }\n\n          this.task.subjectId = taskData.subjectId;\n          this.task.subjectName = taskData.subjectName || \"\";\n\n          // 处理标签数据\n          if (taskData.tagId) {\n            this.task.tagId = taskData.tagId;\n\n            // 立即处理标签，不再等待nextTick\n            const tagIds = taskData.tagId.split(\",\");\n            this.tags = [];\n\n            console.log(\"标签ID列表:\", tagIds);\n            console.log(\"可用标签列表:\", this.tagList);\n\n            // 从已加载的标签列表中找出对应的标签并选中\n            // 使用String()确保类型匹配\n            tagIds.forEach((tagId) => {\n              const tag = this.tagList.find(\n                (t) => String(t.id) === String(tagId)\n              );\n              if (tag) {\n                this.tags.push(tag);\n                console.log(\"找到并添加标签:\", tag.tagName);\n              } else {\n                console.log(\"未找到标签:\", tagId);\n                // 如果找不到，创建一个临时标签对象以显示在UI上\n                this.tags.push({ id: tagId, tagName: \"标签\" + tagId });\n              }\n            });\n          } else {\n            this.task.tagId = \"\";\n            this.tags = [];\n          }\n        } else {\n          uni.showToast({\n            title: response?.msg || \"加载任务详情失败\",\n            icon: \"none\",\n          });\n        }\n        console.log(this.task);\n      } catch (error) {\n        console.error(\"加载任务详情异常:\", error);\n        uni.showToast({\n          title: \"加载任务详情异常，请重试\",\n          icon: \"none\",\n        });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n\n    // 获取选中的学科名称\n    getSelectedSubjectName() {\n      const subject = this.subjectList.find(\n        (s) => s.value === this.task.subjectId\n      );\n      return subject ? subject.text : \"\";\n    },\n\n    // 获取学科列表\n    async fetchSubjectList() {\n      try {\n        this.subjectLoading = true;\n\n        // 获取科目列表，使用较大的pageSize确保一次性加载所有科目\n        const subjectQuery = {\n          currentPage: 1,\n          pageSize: 100, // 假设不会有超过100个科目\n        };\n\n        console.log(\"获取科目列表，参数:\", subjectQuery);\n        const result = await getSubjectList(subjectQuery);\n        console.log(\"获取科目列表结果:\", result);\n\n        // 根据API返回格式调整数据结构\n        if (\n          result &&\n          result.code === 200 &&\n          result.data &&\n          Array.isArray(result.data.records)\n        ) {\n          // 转换records数组为需要的格式，适配uni-data-select组件\n          this.subjectList = result.data.records.map((subject) => ({\n            value: subject.subjectId, // 使用subjectId作为value\n            text: subject.subjectName, // 使用subjectName作为显示文本\n          }));\n\n          console.log(\"转换后的科目列表:\", this.subjectList);\n        } else {\n          // 如果没有数据，提供默认学科选项\n          this.subjectList = [\n            { value: \"1\", text: \"专业课\" },\n            { value: \"2\", text: \"公共课\" },\n            { value: \"3\", text: \"选修课\" },\n          ];\n        }\n      } catch (error) {\n        console.error(\"获取学科列表失败\", error);\n        // 出错时提供默认选项\n        this.subjectList = [\n          { value: \"1\", text: \"专业课\" },\n          { value: \"2\", text: \"公共课\" },\n          { value: \"3\", text: \"选修课\" },\n        ];\n      } finally {\n        this.subjectLoading = false;\n      }\n    },\n\n    // 获取标签列表（支持分页和重置）\n    async fetchTagList(reset = false) {\n      try {\n        // 如果是重置，则重置页码\n        if (reset) {\n          this.currentPage = 1;\n          this.tagList = [];\n          this.hasMoreTags = true;\n\n          this.tagLoading = true;\n        }\n\n        // 构建分页参数\n        const tagQuery = {\n          currentPage: this.currentPage,\n          pageSize: this.pageSize,\n        };\n\n        console.log(\"获取标签列表，分页参数:\", tagQuery);\n        const result = await getTagList(tagQuery);\n        console.log(\"获取标签列表结果:\", result);\n\n        // 根据API返回格式调整数据结构\n        if (result.code === 200) {\n          // 转换records数组为需要的格式\n          const newTags = result.data.records.map((tag) => ({\n            id: tag.tagId, // 注意这里使用tagId而不是id\n            tagName: tag.tagName,\n          }));\n\n          // 如果是重置则替换数据，否则追加数据\n          if (reset) {\n            this.tagList = newTags;\n          } else {\n            this.tagList = [...this.tagList, ...newTags];\n          }\n\n          // 判断是否还有更多数据\n          const totalRecords = result.data.total || 0;\n          this.hasMoreTags = this.tagList.length < totalRecords;\n\n        } else {\n          this.hasMoreTags = false;\n        }\n      } catch (error) {\n        console.error(\"获取标签列表失败:\", error);\n        this.hasMoreTags = false;\n      } finally {\n        this.tagLoading = false;\n      }\n    },\n\n    // 加载更多标签（无限滚动）\n    async loadMoreTags() {\n      // 如果没有更多数据或者正在加载中，则不重复加载\n      if (!this.hasMoreTags || this.tagLoading) {\n        return;\n      }\n\n      this.tagLoading = true;\n      this.currentPage++;\n      await this.fetchTagList(false); // 传递false表示追加数据\n    },\n\n    // 打开标签选择器\n    openTagSelector() {\n      this.$refs.showRight.open(\"right\");\n    },\n\n    // 关闭标签选择器\n    closeTagSelector() {\n      this.$refs.showRight.close();\n      // 更新任务的标签ID\n      this.updateTaskTags();\n    },\n\n    // 切换标签选择状态\n    toggleTag(tag) {\n      const index = this.tags.findIndex((t) => t.id === tag.id);\n      if (index > -1) {\n        // 取消选择\n        this.tags.splice(index, 1);\n      } else {\n        // 添加选择\n        this.tags.push(tag);\n      }\n      console.log(this.tags);\n    },\n\n    // 移除单个标签\n    removeTag(tagId) {\n      const index = this.tags.findIndex((tag) => tag.id === tagId);\n      if (index > -1) {\n        this.tags.splice(index, 1);\n      }\n    },\n\n    // 判断标签是否选中\n    isTagSelected(tagId) {\n      return this.tags.some((tag) => tag.id === tagId);\n    },\n\n    // 兼容旧的selectTag方法\n    selectTag(tag) {\n      // 如果已有标签，添加空格分隔\n      if (this.task.tags) {\n        this.task.tags += \",\";\n      }\n      this.task.tags += tag;\n    },\n    // 处理截止日期变化\n    onDeadlineChange(e) {\n      this.task.deadline = e;\n      console.log(e);\n    },\n    // 移除不再需要的确认和取消方法，内置API直接处理\n\n    // onDateCancel 方法已移除，内置API会自动处理取消逻辑\n    // 表单验证方法\n    validateForm() {\n      console.log(this.task);\n      // 验证任务标题\n      if (!this.task.title.trim()) {\n        uni.showToast({\n          title: \"请输入任务标题\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      if (this.task.title.trim().length > 100) {\n        uni.showToast({\n          title: \"任务标题不能超过100个字符\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      // 验证描述长度\n      if (this.task.description && this.task.description.length > 500) {\n        uni.showToast({\n          title: \"任务描述不能超过500个字符\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      // 验证截止日期非空\n      if (!this.task.deadline || !this.task.deadline.trim()) {\n        uni.showToast({\n          title: \"请选择截止日期\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      // 验证标签选择必选\n      if (!this.task.tagId || this.task.tagId.trim() === \"\") {\n        uni.showToast({\n          title: \"请至少选择一个标签\",\n          icon: \"none\",\n        });\n        return false;\n      }\n\n      return true;\n    },\n    // 检查用户是否登录\n    checkLogin() {\n      const userId = getUserId();\n      if (!userId) {\n        uni.showModal({\n          title: \"提示\",\n          content: \"请先登录\",\n          showCancel: false,\n          success: () => {\n            uni.navigateTo({\n              url: \"/pages/login/login\",\n            });\n          },\n        });\n        return false;\n      }\n      return true;\n    },\n\n    // onStartTimeConfirm、onEndTimeConfirm 和 onTimeCancel 方法已移除，内置API直接处理\n    submitTask() {\n      // 检查登录状态\n      if (!this.checkLogin()) {\n        return;\n      }\n      this.task.tagId = this.tags.map((tag) => tag.id).join(\",\");\n      // 执行详细表单验证\n      if (!this.validateForm()) {\n        return;\n      }\n      console.log(\"更新后的task.tagId:\", this.task.tagId);\n\n      // 构建符合API要求的任务对象\n      // 按照新的数据结构要求包含所有必要字段\n      console.log(this.task);\n\n      // 根据是否为编辑模式构建不同的任务数据\n      const taskData = this.isEditMode\n        ? {\n            // 编辑模式下需要包含taskId\n            taskId: parseInt(this.task.taskId),\n            subjectId: this.task.subjectId ? parseInt(this.task.subjectId) : 0, // 转换为数字类型，默认0\n            tagId: this.task.tagId || \"\", // 标签ID，逗号分隔的字符串\n            taskName: this.task.title.trim(),\n            description: this.task.description?.trim() || \"\", // 只使用原始描述，不添加补充信息\n            // 确保日期格式兼容API（使用T分隔符）\n            deadline: this.task.deadline\n              .replace(/[\\s\\/]/, \"T\")\n              .replace(/\\/([0-9]{2})$/, \"-$1\"),\n            priority: this.task.priority,\n          }\n        : {\n            // 添加模式下的数据结构\n            userId: parseInt(getUserId()) || 0, // 确保userId是数字类型，默认0\n            subjectId: this.task.subjectId ? parseInt(this.task.subjectId) : 0, // 转换为数字类型，默认0\n            tagId: this.task.tagId || \"\", // 标签ID，逗号分隔的字符串\n            taskName: this.task.title.trim(),\n            description: this.task.description?.trim() || \"\", // 只使用原始描述，不添加补充信息\n            // 确保日期格式兼容API（使用T分隔符）\n            deadline: this.task.deadline\n              .replace(/[\\s\\/]/, \"T\")\n              .replace(/\\/([0-9]{2})$/, \"-$1\"),\n            remindTime: \"\", // 暂不设置提醒时间，使用空字符串\n            priority: this.task.priority,\n          };\n\n      // 输出日志以便调试\n      console.log(\"提交的任务数据:\", taskData);\n\n      // 调用真实的API保存任务\n      uni.showLoading({\n        title: this.isEditMode ? \"更新中...\" : \"创建中...\",\n      });\n\n      // 根据模式调用不同的API\n      const apiCall = this.isEditMode\n        ? updateTask(taskData)\n        : addTask(taskData);\n\n      apiCall\n        .then((res) => {\n          uni.hideLoading();\n          console.log(\"API响应:\", res);\n\n          if (res.code === 200) {\n            // 根据模式显示不同的成功提示\n            uni.showToast({\n              title: this.isEditMode ? \"任务更新成功\" : \"任务创建成功\",\n              icon: \"success\",\n              duration: 1500,\n              success: () => {\n                // 延迟返回列表页，以便用户看到成功提示\n                setTimeout(() => {\n                  // 返回任务列表页\n                  uni.reLaunch({\n                    url: \"/pages/tasks/tasks\",\n                  });\n                }, 1500);\n              },\n            });\n          } else {\n            // 显示错误提示\n            uni.showToast({\n              title:\n                res.msg || (this.isEditMode ? \"更新任务失败\" : \"创建任务失败\"),\n              icon: \"none\",\n              duration: 2500,\n            });\n          }\n        })\n        .catch((error) => {\n          uni.hideLoading();\n          console.error(\n            this.isEditMode ? \"更新任务失败:\" : \"创建任务失败:\",\n            error\n          );\n\n          // 显示错误提示\n          uni.showToast({\n            title:\n              error.message ||\n              (this.isEditMode ? \"更新任务失败\" : \"创建任务失败\"),\n            icon: \"none\",\n            duration: 2500,\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/* 确保页面容器不会溢出 */\n.page-container {\n  width: 100%;\n  overflow-x: hidden;\n}\n\n.add-task-container {\n  min-height: 100vh;\n  background-color: #f8faff;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n\n.form-scroll {\n  flex: 1;\n  padding-bottom: 30rpx;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.form-container {\n  padding: 20rpx;\n  width: 100%;\n  box-sizing: border-box;\n\n  .form-item {\n    background-color: #ffffff;\n    border-radius: 20rpx;\n    padding: 24rpx;\n    margin-bottom: 20rpx;\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n    width: 100%;\n    box-sizing: border-box;\n\n    .form-label {\n      font-size: 28rpx;\n      color: #333333;\n      font-weight: 500;\n      margin-bottom: 16rpx;\n    }\n\n    .form-input {\n      width: 100%;\n      font-size: 28rpx;\n      color: #333333;\n      border: none;\n      padding: 8rpx 0;\n      box-sizing: border-box;\n    }\n\n    .form-textarea {\n      width: 100%;\n      font-size: 28rpx;\n      color: #333333;\n      border: none;\n      padding: 8rpx 0;\n      min-height: 160rpx;\n      resize: none;\n      line-height: 1.5;\n      box-sizing: border-box;\n      word-break: break-word;\n    }\n\n    .date-container {\n      display: flex;\n      flex-direction: column;\n      gap: 10rpx;\n    }\n\n    .date-value {\n      font-size: 28rpx;\n      color: #333;\n      padding: 10rpx 0;\n    }\n\n    .date-placeholder {\n      font-size: 28rpx;\n      color: #999;\n      padding: 10rpx 0;\n    }\n\n    .picker-button {\n      background-color: #f0f4ff;\n      color: #5374f7;\n      border: 1rpx solid #e0e8ff;\n      border-radius: 10rpx;\n      font-size: 28rpx;\n      padding: 15rpx 0;\n      width: 100%;\n    }\n\n    .picker-button:active {\n      background-color: #e0e8ff;\n    }\n\n    .time-picker-container {\n      display: flex;\n      flex-direction: column;\n      gap: 20rpx;\n    }\n\n    .picker-item {\n      width: 100%;\n    }\n\n    .picker-label {\n      font-size: 24rpx;\n      color: #666;\n      margin-bottom: 8rpx;\n    }\n\n    .picker-content {\n      font-size: 28rpx;\n      color: #333;\n      padding: 15rpx 0;\n      border-bottom: 1rpx solid #e0e0e0;\n    }\n\n    .picker-content:active {\n      background-color: #f5f5f5;\n    }\n\n    .priority-options {\n      display: flex;\n      gap: 20rpx;\n      width: 100%;\n      box-sizing: border-box;\n\n      .priority-option {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        padding: 20rpx 0;\n        border-radius: 16rpx;\n        border: 2rpx solid #e0e0e0;\n        transition: all 0.3s;\n        box-sizing: border-box;\n\n        &.active {\n          border-color: #5374f7;\n          background-color: #f0f4ff;\n        }\n\n        &.high {\n          &.active {\n            border-color: #ff4d4f;\n            background-color: #fff1f0;\n          }\n        }\n\n        &.medium {\n          &.active {\n            border-color: #faad14;\n            background-color: #fff7e6;\n          }\n        }\n\n        &.low {\n          &.active {\n            border-color: #1890ff;\n            background-color: #e6f7ff;\n          }\n        }\n\n        .priority-icon {\n          font-size: 36rpx;\n          margin-bottom: 8rpx;\n        }\n\n        .priority-text {\n          font-size: 24rpx;\n          color: #666666;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          max-width: 100%;\n\n          .priority-option.active & {\n            color: #5374f7;\n          }\n\n          .priority-option.high.active & {\n            color: #ff4d4f;\n          }\n\n          .priority-option.medium.active & {\n            color: #faad14;\n          }\n\n          .priority-option.low.active & {\n            color: #1890ff;\n          }\n        }\n      }\n    }\n\n    .date-container {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n\n      .date-input {\n        flex: 1;\n        font-size: 28rpx;\n        color: #333333;\n        border: none;\n        padding: 8rpx 0;\n        box-sizing: border-box;\n        background-color: transparent;\n      }\n\n      .calendar-icon {\n        margin-left: 20rpx;\n        font-size: 32rpx;\n        cursor: pointer;\n      }\n    }\n\n    .time-range-container {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n\n      .time-input {\n        flex: 1;\n        font-size: 28rpx;\n        color: #333333;\n        border: none;\n        padding: 8rpx 0;\n        text-align: center;\n        box-sizing: border-box;\n        background-color: transparent;\n        cursor: pointer;\n      }\n\n      .time-separator {\n        font-size: 28rpx;\n        color: #666666;\n        margin: 0 20rpx;\n      }\n    }\n\n    .tags-container {\n      display: flex;\n      flex-wrap: wrap;\n      margin-top: 16rpx;\n      gap: 12rpx;\n      width: 100%;\n      box-sizing: border-box;\n      margin-bottom: 16rpx;\n\n      .tag-item {\n        padding: 8rpx 20rpx;\n        background-color: #f0f0f0;\n        border-radius: 20rpx;\n        font-size: 24rpx;\n        color: #666666;\n        box-sizing: border-box;\n        white-space: nowrap;\n      }\n\n      .selected-tag {\n        background-color: #e6f4ff;\n        color: #4a6cf7;\n        display: flex;\n        align-items: center;\n      }\n\n      .tag-close {\n        margin-left: 10rpx;\n        font-size: 30rpx;\n        color: #999;\n      }\n    }\n\n    .tag-add-container {\n      margin-top: 16rpx;\n    }\n\n    .tag-add-btn {\n      background-color: #f0f0f0;\n      color: #666;\n      padding: 10rpx 24rpx;\n      border-radius: 16rpx;\n      font-size: 26rpx;\n      display: inline-block;\n      border: 1rpx dashed #ccc;\n    }\n\n    .subject-selector {\n      width: 100%;\n    }\n  }\n}\n\n.footer {\n  padding: 20rpx;\n  background-color: #ffffff;\n  border-top: 2rpx solid #f0f0f0;\n  position: sticky;\n  bottom: 0;\n  width: 100%;\n  box-sizing: border-box;\n\n  .submit-button {\n    width: 100%;\n    height: 96rpx;\n    font-size: 32rpx;\n    font-weight: 600;\n    color: #ffffff;\n    background-color: #5374f7;\n    border-radius: 48rpx;\n    border: none;\n    line-height: 96rpx;\n    box-sizing: border-box;\n  }\n}\n\n// 为禁用状态添加样式\nbutton[disabled] {\n  background-color: #a0a0a0 !important;\n  color: #ffffff !important;\n}\n\n// 输入框聚焦样式\ninput:focus,\ntextarea:focus {\n  outline: none;\n}\n\n/* 学科选择器样式 */\n:deep(.uni-data-select) {\n  width: 100%;\n}\n\n:deep(.uni-data-select__selector) {\n  border-radius: 30rpx !important;\n  border-color: #e6e6e6 !important;\n  background-color: #fff !important;\n  padding: 0 30rpx !important;\n  height: 80rpx;\n}\n\n// 样式类，与add-note.vue保持一致\n.section-label {\n  font-size: 28rpx;\n  color: #333;\n  margin-bottom: 16rpx;\n  font-weight: 500;\n}\n\n.subject-selector {\n  margin-bottom: 32rpx;\n}\n\n.selected-subject-info {\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 12rpx;\n  display: block;\n}\n\n.tags-section {\n  margin-bottom: 32rpx;\n}\n\n.tag-item {\n  display: inline-flex;\n  align-items: center;\n  padding: 8rpx 20rpx;\n  background-color: #f0f0f0;\n  border-radius: 30rpx;\n  margin-right: 16rpx;\n  margin-bottom: 16rpx;\n  font-size: 28rpx;\n\n  .tag-close {\n    margin-left: 8rpx;\n    color: #999;\n    font-size: 32rpx;\n    line-height: 1;\n  }\n}\n\n.tag-add-btn {\n  display: inline-block;\n  padding: 8rpx 20rpx;\n  border: 1px dashed #ccc;\n  border-radius: 30rpx;\n  color: #666;\n  font-size: 28rpx;\n  margin-bottom: 16rpx;\n}\n\n.tag-selector-content {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .tag-selector-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    border-bottom: 1px solid #eee;\n\n    .tag-selector-title {\n      font-size: 32rpx;\n      font-weight: 600;\n      color: #333;\n    }\n\n    .tag-selector-close {\n      width: 60rpx;\n      height: 60rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      .close-icon {\n        font-size: 40rpx;\n        color: #999;\n      }\n    }\n  }\n\n  .tag-list {\n    overflow-y: auto;\n    padding: 30rpx;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16rpx;\n  }\n\n  .loading-more,\n  .no-more-data {\n    width: 100%;\n    text-align: center;\n    color: #999;\n    font-size: 24rpx;\n    padding: 20rpx 0;\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/programming/Uniapp/aiNote/pages/tasks/add-task.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}