{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"main-container\">\r\n    <view class=\"header\">\r\n      <text class=\"page-title\">学习助手</text>\r\n      <view class=\"user-info\" @click=\"logout\">\r\n        <view class=\"avatar\">\r\n          <text class=\"avatar-text\">{{ userInfo ? userInfo.username?.[0]?.toUpperCase() || 'U' : 'U' }}</text>\r\n        </view>\r\n        <view class=\"user-details\">\r\n          <text class=\"user-name\">{{ userInfo ? userInfo.username || '游客' : '游客' }}</text>\r\n          <text class=\"logout-text\">点击退出</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"stats-container\">\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">3</text>\r\n        <text class=\"stat-label\">待办任务</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">12</text>\r\n        <text class=\"stat-label\">累计笔记</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">7</text>\r\n        <text class=\"stat-label\">连续学习</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"today-tasks\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">今日待办</text>\r\n        <text class=\"section-more\" @click=\"viewAllTasks('today')\">查看全部</text>\r\n      </view>\r\n      <view class=\"task-list\">\r\n        <view class=\"task-item\" v-for=\"(task, index) in todayTaskList\" :key=\"index\">\r\n          <checkbox class=\"task-checkbox\"></checkbox>\r\n          <view class=\"task-content\">\r\n            <text class=\"task-title\">{{ task.title }}</text>\r\n            <text class=\"task-time\">{{ task.time }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"upcoming-tasks\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">即将截止(3天内)</text>\r\n        <text class=\"section-more\" @click=\"viewAllTasks('upcoming')\">查看全部</text>\r\n      </view>\r\n      <view class=\"task-list\">\r\n        <view class=\"task-item\" v-for=\"(task, index) in upcomingTaskList\" :key=\"index\">\r\n          <checkbox class=\"task-checkbox\"></checkbox>\r\n          <view class=\"task-content\">\r\n            <text class=\"task-title\">{{ task.title }}</text>\r\n            <view class=\"task-deadline\">\r\n              <text class=\"deadline-label\">{{ task.deadline }}</text>\r\n              <view class=\"priority-tag\" :class=\"task.priority\">{{ task.priorityText }}</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n// 导入用户API和存储工具\r\nimport { userAPI } from '../../api';\r\nimport { getUserInfo, clearUserData } from '../../utils/storage';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: null,\r\n      todayTaskList: [\r\n        {\r\n          title: '完成数学作业第5章',\r\n          time: '数学 11:00'\r\n        },\r\n        {\r\n          title: '复习英语单词本',\r\n          time: '英语 14:00'\r\n        },\r\n        {\r\n          title: '背诵',\r\n          time: '语文 16:00'\r\n        }\r\n      ],\r\n      upcomingTaskList: [\r\n        {\r\n          title: '提交课程论文',\r\n          deadline: '明天截止',\r\n          priority: 'high',\r\n          priorityText: '论文'\r\n        },\r\n        {\r\n          title: '历史',\r\n          deadline: '后天截止',\r\n          priority: 'medium',\r\n          priorityText: '作业'\r\n        },\r\n        {\r\n          title: '编程项目一阶提交',\r\n          deadline: '后天截止',\r\n          priority: 'low',\r\n          priorityText: '计划中'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  onLoad() {\r\n    // 页面加载时获取用户信息\r\n    this.loadUserInfo();\r\n  },\r\n  methods: {\r\n    // 加载用户信息\r\n    loadUserInfo() {\r\n      this.userInfo = getUserInfo();\r\n      console.log('userInfo', this.userInfo)\r\n      if (!this.userInfo) {\r\n        // 如果本地没有用户信息，尝试从服务器获取\r\n        this.fetchUserInfo();\r\n      }\r\n    },\r\n    \r\n    // 从服务器获取用户信息\r\n    async fetchUserInfo() {\r\n      try {\r\n        const res = await userAPI.getUserInfo();\r\n        this.userInfo = res.data;\r\n      } catch (error) {\r\n        console.error('获取用户信息失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 退出登录\r\n    async logout() {\r\n      uni.showModal({\r\n        title: '退出登录',\r\n        content: '确定要退出登录吗？',\r\n        confirmText: '确定',\r\n        cancelText: '取消',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              // 调用退出登录API\r\n              await userAPI.logout();\r\n              // 清除本地数据\r\n              clearUserData();\r\n              // 跳转到登录页面\r\n              uni.reLaunch({\r\n                    url: '/pages/login/login'\r\n              });\r\n            } catch (error) {\r\n              console.error('退出登录失败:', error);\r\n              // 即使API调用失败，也要清除本地数据并跳转到登录页\r\n              clearUserData();\r\n              uni.reLaunch({\r\n                    url: '/pages/login/login'\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    viewAllTasks(type) {\r\n      uni.showToast({\r\n        title: `查看全部${type === 'today' ? '今日' : '即将截止'}任务`,\r\n        icon: 'none'\r\n      })\r\n    },\r\n    \r\n    handleTaskComplete(task) {\r\n      // 处理任务完成逻辑\r\n      uni.showToast({\r\n        title: '任务已完成',\r\n        icon: 'success'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main-container {\r\n  min-height: 100vh;\r\n  background-color: #f8f8f8;\r\n  padding: 30rpx 20rpx 120rpx;\r\n}\r\n\r\n.header {\r\n    padding: 20rpx;\r\n    margin-bottom: 30rpx;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    \r\n    .page-title {\r\n      font-size: 36rpx;\r\n      font-weight: 600;\r\n      color: #333333;\r\n    }\r\n    \r\n    .user-info {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 10rpx;\r\n      border-radius: 12rpx;\r\n      background-color: #f5f5f5;\r\n    }\r\n    \r\n    .avatar {\r\n      width: 60rpx;\r\n      height: 60rpx;\r\n      border-radius: 50%;\r\n      background-color: #5374f7;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      margin-right: 16rpx;\r\n    }\r\n    \r\n    .avatar-text {\r\n      color: #ffffff;\r\n      font-size: 28rpx;\r\n      font-weight: 600;\r\n    }\r\n    \r\n    .user-details {\r\n      display: flex;\r\n      flex-direction: column;\r\n    }\r\n    \r\n    .user-name {\r\n      font-size: 28rpx;\r\n      font-weight: 500;\r\n      color: #333333;\r\n    }\r\n    \r\n    .logout-text {\r\n      font-size: 22rpx;\r\n      color: #999999;\r\n      margin-top: 2rpx;\r\n    }\r\n  }\r\n\r\n.stats-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20rpx;\r\n  margin-bottom: 30rpx;\r\n  \r\n  .stat-card {\r\n    flex: 1;\r\n    background-color: #ffffff;\r\n    border-radius: 20rpx;\r\n    padding: 28rpx 0;\r\n    text-align: center;\r\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n    \r\n    .stat-number {\r\n      display: block;\r\n      font-size: 48rpx;\r\n      font-weight: 600;\r\n      color: #5374f7;\r\n      margin-bottom: 8rpx;\r\n    }\r\n    \r\n    .stat-label {\r\n      font-size: 24rpx;\r\n      color: #666666;\r\n    }\r\n  }\r\n}\r\n\r\n.today-tasks,\r\n.upcoming-tasks {\r\n  background-color: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 28rpx;\r\n  margin-bottom: 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n  \r\n  .section-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 28rpx;\r\n    \r\n    .section-title {\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      color: #333333;\r\n    }\r\n    \r\n    .section-more {\r\n      font-size: 26rpx;\r\n      color: #5374f7;\r\n    }\r\n  }\r\n  \r\n  .task-list {\r\n    \r\n    .task-item {\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding: 16rpx 0;\r\n      border-bottom: 1rpx solid #f0f0f0;\r\n      \r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n      \r\n      .task-checkbox {\r\n        transform: scale(0.8);\r\n        margin-right: 16rpx;\r\n        margin-top: 8rpx;\r\n      }\r\n      \r\n      .task-content {\r\n        flex: 1;\r\n        \r\n        .task-title {\r\n          display: block;\r\n          font-size: 30rpx;\r\n          color: #333333;\r\n          margin-bottom: 8rpx;\r\n        }\r\n        \r\n        .task-time {\r\n          font-size: 24rpx;\r\n          color: #999999;\r\n        }\r\n        \r\n        .task-deadline {\r\n          display: flex;\r\n          align-items: center;\r\n          \r\n          .deadline-label {\r\n            font-size: 24rpx;\r\n            color: #999999;\r\n            margin-right: 12rpx;\r\n          }\r\n          \r\n          .priority-tag {\r\n            padding: 4rpx 16rpx;\r\n            border-radius: 12rpx;\r\n            font-size: 20rpx;\r\n            \r\n            &.high {\r\n              background-color: #ffe6e6;\r\n              color: #ff4d4f;\r\n            }\r\n            \r\n            &.medium {\r\n              background-color: #fff7e6;\r\n              color: #faad14;\r\n            }\r\n            \r\n            &.low {\r\n              background-color: #e6f7ff;\r\n              color: #1890ff;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/programming/Uniapp/aiNote/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getUserInfo","uni","userAPI","clearUserData"],"mappings":";;;;AAwEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,eAAe;AAAA,QACb;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACP;AAAA,QACD;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACP;AAAA,QACD;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,MACD;AAAA,MACD,kBAAkB;AAAA,QAChB;AAAA,UACE,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU;AAAA,UACV,cAAc;AAAA,QACf;AAAA,QACD;AAAA,UACE,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU;AAAA,UACV,cAAc;AAAA,QACf;AAAA,QACD;AAAA,UACE,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU;AAAA,UACV,cAAc;AAAA,QAChB;AAAA,MACF;AAAA,IACF;AAAA,EACD;AAAA,EACD,SAAS;AAEP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,eAAe;AACb,WAAK,WAAWA,cAAAA;AAChBC,oBAAY,MAAA,MAAA,OAAA,gCAAA,YAAY,KAAK,QAAQ;AACrC,UAAI,CAAC,KAAK,UAAU;AAElB,aAAK,cAAa;AAAA,MACpB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,gBAAgB;AACpB,UAAI;AACF,cAAM,MAAM,MAAMC,kBAAQ;AAC1B,aAAK,WAAW,IAAI;AAAA,MACpB,SAAO,OAAO;AACdD,sBAAA,MAAA,MAAA,SAAA,gCAAc,aAAa,KAAK;AAAA,MAClC;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,SAAS;AACbA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,gBAAI;AAEF,oBAAMC,UAAAA,QAAQ;AAEdC,4BAAAA;AAEAF,4BAAAA,MAAI,SAAS;AAAA,gBACP,KAAK;AAAA,cACX,CAAC;AAAA,YACD,SAAO,OAAO;AACdA,iFAAc,WAAW,KAAK;AAE9BE,4BAAAA;AACAF,4BAAAA,MAAI,SAAS;AAAA,gBACP,KAAK;AAAA,cACX,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAED,aAAa,MAAM;AACjBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,OAAO,SAAS,UAAU,OAAO,MAAM;AAAA,QAC9C,MAAM;AAAA,OACP;AAAA,IACF;AAAA,IAED,mBAAmB,MAAM;AAEvBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtLA,GAAG,WAAW,eAAe;"}